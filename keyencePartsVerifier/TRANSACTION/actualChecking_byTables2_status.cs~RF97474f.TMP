using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace keyencePartsVerifier.TRANSACTION
{
    public partial class actualChecking_byTables2_status : Form
    {
        public actualChecking_byTables2_status()
        {
            InitializeComponent();
        }

        public actualChecking_byTables2_status(string _model=null, string _line=null, string _machine=null, string _table=null, SqlConnection _con=null)
        {
            InitializeComponent();
            _getStatus(_model, _line, _machine, _table, _con);
        }
        private void actualChecking_byTables2_status_Load(object sender, EventArgs e)
        {
            if (dataGridView1.Rows.Count > 0)
            {
                this.WindowState = FormWindowState.Normal;
                //this.StartPosition = FormStartPosition.CenterScreen;
                this.Location = new Point((Screen.PrimaryScreen.WorkingArea.Width - this.Width) / 2, (Screen.PrimaryScreen.WorkingArea.Height- this.Height) / 2);
            }
            else
            {
                MessageBox.Show("No rows found!");
                this.Close();
            }
        }
        void _getStatus(string model, string line, string machine, string table, SqlConnection con)
        {
            if(model==null || line==null || 
                machine==null || table==null ||
                con == null)
            {
                MessageBox.Show("Not supplied all parameters!", "Required fields are null", MessageBoxButtons.OK,MessageBoxIcon.Error);
                return;
            }
           
            using (con)
            {
                SqlCommand cmdS = new SqlCommand("sp_getCheckingProgress", con);
                cmdS.CommandType = CommandType.StoredProcedure;
                cmdS.Parameters.AddWithValue("@model", model);
                cmdS.Parameters.AddWithValue("@line", line);
                cmdS.Parameters.AddWithValue("@machine", machine);
                cmdS.Parameters.AddWithValue("@table", table);
                con.Open();
                SqlDataAdapter da = new SqlDataAdapter(cmdS);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dataGridView1.DataSource = dt;
                //MessageBox.Show(model+"-" +line+"-"+  machine+"-"+ table, "Requested Query");
            }

            lbl_title.Text = line + " - " + machine + " - " + table+"     ("+dataGridView1.Rows.Count.ToString()+" rows)";
        }

        private void btn_close_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void btn_close_Click_1(object sender, EventArgs e)
        {
            this.Close();
        }
    }

    //public class Infomtion<T> where T : class
    //{
    //    public 
    //}
    //public class fa
    //{

    //    //System.Collections.IEnumerable<Infomtio>
    //    //public void T 
    //    //{

    //    string _model;

    //    public string Model
    //    {
    //        get { return _model; }
    //        set { _model = value; }
    //    } 
    //    string _line;

    //    public string Line
    //    {
    //        get { return _line; }
    //        set { _line = value; }
    //    } 
    //    string _machine;

    //    public string Machine
    //    {
    //        get { return _machine; }
    //        set { _machine = value; }
    //    } 
    //    string _table;

    //    public string Table
    //    {
    //        get { return _table; }
    //        set { _table = value; }
    //    } 
    //    SqlConnection con;

    //    public SqlConnection Con
    //    {
    //        get { return con; }
    //        set { con = value; }
    //    }
    //}
}


